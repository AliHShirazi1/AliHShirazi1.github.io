<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#ffffff" />
  <title>Ali Heidari Shirazi ‚Äî Portfolio</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüî¨</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Source+Serif+Pro:wght@600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- THREE.js and TWEEN.js for the lattice animation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/21.0.0/tween.umd.js"></script>
  <!-- MathJax for LaTeX rendering -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  
  <style>
    :root {
      --bg-light: #f9fafb;
      --card-bg: #ffffff;
      --card-border: #e5e7eb;
      --text-dark: #1f2937;
      --text-main: #374151;
      --text-subtle: #6b7280;
      --accent-primary: #2563eb;
    }

    body {
      background-color: var(--bg-light);
      color: var(--text-main);
      font-family: 'Inter', sans-serif;
      line-height: 1.7;
    }
    
    .font-serif {
      font-family: 'Source Serif Pro', serif;
    }

    .card {
      background-color: var(--card-bg);
      border: 1px solid var(--card-border);
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.07), 0 4px 6px -4px rgb(0 0 0 / 0.07);
    }
    
    .highlight-link {
      color: var(--text-dark);
      font-weight: 500;
      transition: color 0.2s;
      position: relative;
      text-decoration: none;
    }
     .highlight-link::after {
      content: '';
      position: absolute;
      width: 100%;
      transform: scaleX(0);
      height: 1px;
      bottom: -2px;
      left: 0;
      background-color: var(--accent-primary);
      transform-origin: bottom right;
      transition: transform 0.25s ease-out;
    }
    .highlight-link:hover::after {
      transform: scaleX(1);
      transform-origin: bottom left;
    }
    .highlight-link:hover {
      color: var(--accent-primary);
    }

    .scroll-card {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .scroll-card.is-visible {
      opacity: 1;
      transform: translateY(0);
    }

    #research-modal {
      transition: opacity 0.3s ease-in-out;
      background-color: rgba(0,0,0,0.5);
    }
    #research-modal .modal-content {
      transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
    }

    .nav-scrolled {
      background-color: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(8px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.04);
      border-bottom: 1px solid var(--card-border);
    }
    
    .aspect-card-image {
        aspect-ratio: 1 / 1.3;
    }
    .resume-item ul {
      list-style-type: disc;
      padding-left: 1.5rem;
    }

    /* --- Styles for Lattice Animation --- */
    .speech-bubble {
        position: absolute;
        background-color: rgba(240, 240, 240, 0.8);
        color: #333;
        padding: 8px 12px;
        border-radius: 15px;
        font-size: 14px;
        white-space: nowrap;
        display: none; 
        transform: translate(-50%, -130%); 
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        backdrop-filter: blur(2px);
    }
    .speech-bubble::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 50%;
        transform: translateX(-50%);
        border-width: 8px 8px 0;
        border-style: solid;
        border-color: rgba(240, 240, 240, 0.8) transparent transparent transparent;
    }
  </style>
</head>
<body class="overflow-x-hidden">
  
  <!-- Navigation Bar -->
  <nav id="navbar" class="fixed top-0 left-0 right-0 z-40 transition-all duration-300">
    <div class="max-w-5xl mx-auto px-4 sm:px-8">
      <div class="flex justify-between items-center h-16">
        <a href="#home" class="font-serif font-bold text-lg text-dark">A. H. Shirazi</a>
        <div class="hidden md:flex items-center space-x-8">
          <a href="#research" class="highlight-link text-sm">Research</a>
          <a href="#education" class="highlight-link text-sm">Education</a>
          <a href="#experience" class="highlight-link text-sm">Experience</a>
          <a href="#publications" class="highlight-link text-sm">Publications</a>
          <a href="#skills" class="highlight-link text-sm">Skills</a>
          <a href="#awards" class="highlight-link text-sm">Awards</a>
        </div>
      </div>
    </div>
  </nav>

  <div class="max-w-5xl mx-auto px-4 sm:px-8">
    <!-- Header Section -->
    <header id="home" class="grid grid-cols-1 md:grid-cols-2 gap-16 min-h-screen items-center pt-24 md:pt-0">
      <!-- Left Intro Content -->
      <div>
        <img  
          src="profile.png"  
          alt="Profile picture of Ali Heidari Shirazi"  
          class="rounded-full w-48 h-48 border-4 border-white shadow-lg mb-8 object-cover"
        >
        <h1 class="text-4xl md:text-5xl font-bold tracking-tight font-serif text-dark">Ali Heidari Shirazi</h1>
        <p class="text-xl text-accent-primary mt-4 font-medium">Ph.D. in Mechanical Engineering</p>
        <div class="mt-6 text-main space-y-4 max-w-lg">
            <p>
                I am a Ph.D. candidate and Graduate Research Assistant at the University of Tennessee, Knoxville, specializing in the dynamics of mechanical metamaterials. My work focuses on understanding how disorder and nonlinearities affect wave propagation characteristics.
            </p>
        </div>
        <div class="mt-8 flex items-center gap-8">
          <a href="mailto:aheidar1@vols.utk.edu" class="highlight-link">Email</a>
          <a href="https://www.linkedin.com/in/alihshirazi/" target="_blank" class="highlight-link">LinkedIn</a>
          <a href="https://scholar.google.com/citations?user=jsP5-kQAAAAJ&hl=en" target="_blank" class="highlight-link">Google Scholar</a>
        </div>
      </div>

      <!-- Right Lattice Animation -->
      <div class="hidden md:flex flex-col items-center justify-center relative">
        <div class="h-[60vh] w-full relative">
            <canvas id="lattice-canvas" class="w-full h-full rounded-lg"></canvas>
            <div id="speech-bubble-container" class="absolute top-0 left-0 w-full h-full pointer-events-none"></div>
            <button id="morph-button" class="absolute bottom-8 left-1/2 -translate-x-1/2 px-6 py-3 text-base font-medium rounded-full shadow-lg bg-white/70 backdrop-blur-sm border border-gray-200 text-gray-700 hover:bg-white hover:-translate-y-0.5 hover:shadow-xl transition-all duration-200">Excite!</button>
        </div>
        <div class="w-full text-center mt-4 px-4">
            <p class="text-xs text-subtle italic">This interactive animation showcases a shape-morphing mechanical metamaterial. Click 'Excite!' to induce a parabolic deformation, demonstrating how these smart structures can change their physical properties on command.</p>
        </div>
      </div>
    </header>
    
    <!-- Scrolling Full-Width Cards -->
    <main class="space-y-20 sm:space-y-28 py-16">
      
      <!-- Research Focus Section -->
      <section id="research" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Research Focus</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="research-card group cursor-pointer" data-title="Disordered Metamaterials" data-description="Investigating the effects of positional, material, and geometrical disorder on Bragg-scattering and locally resonant metamaterials to understand and predict their complex wave propagation behavior. (Ongoing study)" data-img-src="research1.png">
                <div class="card rounded-xl p-4 h-full">
                  <div class="overflow-hidden rounded-lg mb-4 aspect-card-image">
                    <img src="research1.png" alt="Abstract representation of disordered metamaterials" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                  </div>
                  <h3 class="font-semibold text-dark">Disordered Metamaterials</h3>
                </div>
            </div>
            <div class="research-card group cursor-pointer" data-title="Nonlinear Dynamics" data-description="Analyzing the influence of chaos, bifurcation, and dead-zone nonlinearities on the bandgaps of mechanical systems through advanced time-domain simulations and analytical models. (Under review)" data-img-src="research4.png">
                <div class="card rounded-xl p-4 h-full">
                  <div class="overflow-hidden rounded-lg mb-4 aspect-card-image">
                    <img src="research4.png" alt="Abstract representation of nonlinear dynamics" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                  </div>
                  <h3 class="font-semibold text-dark">Nonlinear Dynamics</h3>
                </div>
            </div>
            <div class="research-card group cursor-pointer" data-title="Wave Propagation" data-description="Analyzing diffraction mechanisms (EM/TM, elastic wave) and higher order mode (HOM) generation in MMs. (Ongoing study)" data-img-src="research3.png">
                <div class="card rounded-xl p-4 h-full">
                  <div class="overflow-hidden rounded-lg mb-4 aspect-card-image">
                    <img src="research3.png" alt="Abstract representation of wave propagation" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                  </div>
                  <h3 class="font-semibold text-dark">Wave Propagation</h3>
                </div>
            </div>
            <div class="research-card group cursor-pointer" data-title="Dynamic Characterization" data-description="Developing and applying spacetime Fourier transforms and custom C++ tools to resolve analytical challenges in the homogenization of dispersive and disordered metamaterials. (Published study)" data-link="https://doi.org/10.1016/j.ijsolstr.2025.113339" data-link-text="(Published study)" data-img-src="research2.png">
                <div class="card rounded-xl p-4 h-full">
                  <div class="overflow-hidden rounded-lg mb-4 aspect-card-image">
                    <img src="research2.png" alt="Abstract representation of computational methods" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                  </div>
                  <h3 class="font-semibold text-dark">Dynamic Characterization</h3>
                </div>
            </div>
        </div>
      </section>

      <!-- Education Section -->
      <section id="education" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Education</h2>
        <div class="space-y-8">
          <div class="card rounded-xl p-6">
            <div class="flex justify-between items-start">
              <h3 class="font-semibold text-dark text-lg">University of Tennessee, Knoxville</h3>
              <p class="text-sm text-subtle text-right whitespace-nowrap">May 2024 ‚Äì Expected Fall 2026</p>
            </div>
            <p class="text-md text-main mt-1">Ph.D. in Mechanical Engineering</p>
            <p class="text-sm text-subtle mt-2">Dissertation topic: <span class="font-semibold">The Effect of Disorder on Elastodynamic Metamaterials.</span></p>
            <p class="text-sm text-subtle">Overall GPA: 4.0</p>
          </div>
          <div class="card rounded-xl p-6">
            <div class="flex justify-between items-start">
              <h3 class="font-semibold text-dark text-lg">University of Tennessee, Knoxville</h3>
              <p class="text-sm text-subtle text-right whitespace-nowrap">June 2022 ‚Äì May 2024</p>
            </div>
            <p class="text-md text-main mt-1">M.Sc. in Mechanical Engineering</p>
            <p class="text-sm text-subtle">Overall GPA: 4.0</p>
          </div>
          <div class="card rounded-xl p-6">
            <div class="flex justify-between items-start">
              <h3 class="font-semibold text-dark text-lg">Shahid Chamran University, Ahvaz</h3>
              <p class="text-sm text-subtle text-right whitespace-nowrap">September 2015 ‚Äì February 2020</p>
            </div>
            <p class="text-md text-main mt-1">B.S. in Mechanical Engineering</p>
            <p class="text-sm text-subtle mt-2">Thesis title: <span class="font-semibold italic">Application of multiple scale method in analysis of vibrational behavior of a metamaterial beam.</span></p>
            <p class="text-sm text-subtle">Overall GPA: 3.34</p>
          </div>
        </div>
      </section>

      <!-- Research Experience Section -->
      <section id="experience" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Research Experience</h2>
        <div class="space-y-8">
          <div class="card rounded-xl p-6 resume-item">
            <div class="flex justify-between items-start">
              <h3 class="font-semibold text-dark text-lg">Graduate Research Assistant</h3>
              <p class="text-sm text-subtle text-right whitespace-nowrap">June 2022 ‚Äì Present</p>
            </div>
            <p class="text-sm text-subtle">University of Tennessee, Knoxville | Advisor: Reza Abedi, Ph.D.</p>
            <ul class="mt-4 space-y-2 text-sm text-main">
              <li>Demonstrated the destructive influence of chaos and bifurcation on bandgaps in systems with dead-zone/backlash nonlinearities through time-domain simulations.</li>
              <li>Investigated the effects of positional, material, and geometrical disorder on Bragg-scattering and locally resonant metamaterials.</li>
              <li>Analyzed wave diffraction and the emergence of higher-order modes in layered media.</li>
              <li>Discovered coupled bandgaps in a novel class of metamaterials utilizing parallel beams.</li>
              <li>Applied spacetime Fourier transforms to resolve branch ambiguity challenges in the dynamic homogenization of dispersive and disordered metamaterials.</li>
              <li>Developed a C++ toolset for analyzing wave propagation and retrieving dynamic properties in one-dimensional disordered media.</li>
            </ul>
          </div>
          <div class="card rounded-xl p-6 resume-item">
            <div class="flex justify-between items-start">
              <h3 class="font-semibold text-dark text-lg">Research Assistant</h3>
              <p class="text-sm text-subtle text-right whitespace-nowrap">September 2015 ‚Äì February 2020</p>
            </div>
            <p class="text-sm text-subtle">Shahid Chamran University, Ahvaz | Advisor: Hamid M-Sedighi, Ph.D.</p>
            <ul class="mt-4 space-y-2 text-sm text-main">
              <li>Applied perturbation methods to analyze the governing equations of nonlinear dynamical systems.</li>
              <li>Investigated coupled rotational‚Äìtranslational local resonators for broadband vibration suppression in elastic metamaterials.</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Publications Section -->
      <section id="publications" class="scroll-card scroll-mt-24">
          <h2 class="text-3xl font-bold font-serif text-dark mb-2">Journal Publications</h2>
          <p class="text-sm text-subtle mb-8">Total Citations: 465  &bull; h-index: 7 &bull; i10-index: 6</p>
          <div id="publications-container" class="space-y-4">
            <!-- Publications will be injected here -->
          </div>
          <div class="mt-8 flex justify-between items-center">
            <button id="prevPageBtn" class="bg-white border border-gray-200 rounded-lg px-5 py-2.5 text-sm font-medium text-main hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">Previous</button>
            <span id="pageIndicator" class="text-sm text-subtle"></span>
            <button id="nextPageBtn" class="bg-white border border-gray-200 rounded-lg px-5 py-2.5 text-sm font-medium text-main hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">Next</button>
          </div>
      </section>

      <!-- Skills Section -->
      <section id="skills" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Skills</h2>
        <div class="grid md:grid-cols-2 gap-4">
            <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">AI & Machine Learning</div>
              <p class="text-sm text-main">LLMs, RAG, AI Agents, CNN, TensorFlow</p>
            </div>
            <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">Programming</div>
              <p class="text-sm text-main">Python, C++ (OOP), HTML</p>
            </div>
            <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">Engineering Software</div>
              <p class="text-sm text-main">COMSOL, SolidWorks, Ansys, Recurdyn, MSC ADAMS</p>
            </div>
            <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">Mathematical Software</div>
              <p class="text-sm text-main">Matlab, Simulink, Maple, Mathematica</p>
            </div>
             <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">Graphical Design & Visualization</div>
              <p class="text-sm text-main">Adobe Creative Suite (Illustrator, Photoshop), 3D Studio Max</p>
            </div>
            <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">Language Competencies</div>
              <p class="text-sm text-main">Persian (Native), English (Fluent)</p>
            </div>
        </div>
      </section>

        <!-- Honors and Awards Section -->
      <section id="awards" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Honors and Awards</h2>
        <div class="space-y-4">
            <div class="card rounded-xl p-6 flex justify-between items-center">
              <p class="font-semibold text-dark">Shipley-Swann Graduate School Fellowship Awardee</p>
              <p class="text-sm text-subtle whitespace-nowrap">2025‚Äì2026</p>
            </div>
            <div class="card rounded-xl p-6 flex justify-between items-center">
              <p class="font-semibold text-dark">Graduate Student Senate Award for Excellence in Graduate Research</p>
              <p class="text-sm text-subtle whitespace-nowrap">2025</p>
            </div>
            <div class="card rounded-xl p-6 flex justify-between items-center">
              <p class="font-semibold text-dark">First Place, National Student Competition in Glider Design, Sharif University</p>
              <p class="text-sm text-subtle whitespace-nowrap">2017</p>
            </div>
            <div class="card rounded-xl p-6 flex justify-between items-center">
              <p class="font-semibold text-dark">Top 5%, National University Entrance Exam of Iran</p>
              <p class="text-sm text-subtle whitespace-nowrap">2015</p>
            </div>
        </div>
      </section>

      <!-- Projects Section -->
      <section id="projects" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Projects</h2>
        <div class="space-y-8">
            <div class="card rounded-xl p-6 resume-item">
                <h3 class="font-semibold text-dark text-lg">Active Projects</h3>
                <ul class="mt-4 space-y-4 text-sm text-main">
                    <li>
                        <p class="font-semibold">Disorder Effects on Metamaterial Bandgaps:</p>
                        <p>Exploring how structural and material variability influence the robustness of Bragg- and resonance-based bandgaps.</p>
                    </li>
                    <li>
                        <p class="font-semibold">Multi-Beam Metamaterial Design:</p>
                        <p>Designing multi-beam structures that enable advanced dynamic modes and broadened attenuation ranges.</p>
                    </li>
                    <li>
                        <p class="font-semibold">Wave Diffraction and Higher Order Modes:</p>
                        <p>Analyzing diffraction mechanisms and higher order mode generation in layered media.</p>
                    </li>
                </ul>
            </div>
            <div class="card rounded-xl p-6 resume-item">
                <h3 class="font-semibold text-dark text-lg">Academic Projects</h3>
                <ul class="mt-4 space-y-2 text-sm text-main">
                    <li>Developed a Retrieval-Augmented Generation (RAG) chatbot and LLM agents using Python and LangChain.</li>
                    <li>Optimized bandgaps/wave guides using heuristic optimization techniques.</li>
                    <li>Performed statistical analysis of wave property variations in a randomized one-dimensional domain.</li>
                    <li>Homogenized a two-phase medium through microstructural image analysis using Convolutional Neural Networks (CNN).</li>
                    <li>Extended Slider-Crank mechanism concept as a nonlinear local resonator in metamaterial beams.</li>
                </ul>
            </div>
        </div>
      </section>

      <!-- Professional Service Section -->
      <section id="service" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Professional Service</h2>
        <div class="grid md:grid-cols-2 gap-8">
            <div class="card rounded-xl p-6 resume-item">
                <h3 class="font-semibold text-dark text-lg mb-4">Journal Peer-Reviewer</h3>
                <ul class="space-y-2 text-sm text-main">
                    <li>Journal of Applied Physics (3 papers)</li>
                    <li>Mechanics of Materials (1 paper)</li>
                    <li>International Journal of Solids and Structures (1 paper)</li>
                    <li>Proceedings of the IMechE, Part L (6 papers)</li>
                </ul>
            </div>
            <div class="card rounded-xl p-6 resume-item">
                <h3 class="font-semibold text-dark text-lg mb-4">Memberships and Leadership</h3>
                <ul class="space-y-2 text-sm text-main">
                    <li>President, Graduate Association of MABE Engineers (GAME)</li>
                    <li>Rocky Top President‚Äôs Institute (RTPI)</li>
                    <li>Member, American Society of Mechanical Engineers (ASME)</li>
                </ul>
            </div>
        </div>
      </section>

    </main>
  </div>

  <!-- Footer -->
  <footer class="border-t border-gray-200">
    <div class="max-w-5xl mx-auto px-4 sm:px-8 py-12 text-center text-subtle">
      <div class="flex justify-center items-center gap-8 mb-6">
        <a href="mailto:aheidar1@vols.utk.edu" class="highlight-link text-sm">Email</a>
        <a href="https://www.linkedin.com/in/alihshirazi/" target="_blank" class="highlight-link text-sm">LinkedIn</a>
        <a href="https://scholar.google.com/citations?user=jsP5-kQAAAAJ&hl=en" target="_blank" class="highlight-link text-sm">Google Scholar</a>
      </div>
      <p class="text-sm">&copy; 2025 Ali Heidari Shirazi. All rights reserved.</p>
    </div>
  </footer>


  <!-- Research Card Modal -->
  <div id="research-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 opacity-0 pointer-events-none">
    <div id="modal-content" class="modal-content bg-white rounded-xl w-full max-w-lg p-6 relative transform scale-95 opacity-0">
      <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 transition-colors z-10 text-4xl leading-none">&times;</button>
        <div>
          <img id="modal-img" src="" alt="" class="rounded-lg w-full h-auto object-cover mb-4">
          <h2 id="modal-title" class="text-2xl font-bold font-serif text-dark"></h2>
          <p id="modal-description" class="text-main mt-2"></p>
        </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Navbar Scroll Effect ---
        const navbar = document.getElementById('navbar');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                navbar.classList.add('nav-scrolled');
            } else {
                navbar.classList.remove('nav-scrolled');
            }
        });

        // --- Animate Cards on Scroll ---
        const scrollObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.scroll-card').forEach(card => {
            scrollObserver.observe(card);
        });

        // --- NEW: Interactive Lattice Animation ---
        const latticeCanvas = document.getElementById('lattice-canvas');
        if(latticeCanvas) {
            const scene = new THREE.Scene();
            const aspect = latticeCanvas.clientWidth / latticeCanvas.clientHeight;
            const frustumSize = 38;
            const camera = new THREE.OrthographicCamera(
                frustumSize * aspect / -2, frustumSize * aspect / 2,
                frustumSize / 2, frustumSize / -2,
                1, 1000
            );
            camera.position.set(25, 25, 25);
            camera.lookAt(scene.position);
            scene.add(camera);

            const renderer = new THREE.WebGLRenderer({ canvas: latticeCanvas, antialias: true, alpha: true });
            renderer.setClearColor(0x000000, 0);
            renderer.setSize(latticeCanvas.clientWidth, latticeCanvas.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
            scene.add(ambientLight);
            const pointLight1 = new THREE.PointLight(0xffffff, 2);
            pointLight1.position.set(20, 25, 20);
            scene.add(pointLight1);

            const speechBubbleContainer = document.getElementById('speech-bubble-container');
            const phrases = [
                "Happy metamaterial!", "Yayyyy!", "Whee!", "Boing!",
                "I'm morphing!", "So round!", "Look, a sphere!", "We have potential!",
                "Shape shifter!", "This is fun!", "Hello world!"
            ];

            const spheres = [];
            const lines = [];
            const gridSize = 5;
            const spacing = 4.0;
            const sphereRadius = 0.8;
            const sphereGeometry = new THREE.SphereGeometry(sphereRadius, 32, 32);
            const lineMaterial = new THREE.LineBasicMaterial({ color: 0x555555, opacity: 0.6, transparent: true });
            const eyeGeometry = new THREE.CircleGeometry(0.2, 32);
            const pupilGeometry = new THREE.CircleGeometry(0.1, 32);
            const eyeMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
            const pupilMaterial = new THREE.MeshBasicMaterial({ color: 0x000000 });

            const sphereGrid = [];
            for (let i = 0; i < gridSize; i++) {
                const row = [];
                for (let j = 0; j < gridSize; j++) {
                    const material = new THREE.MeshStandardMaterial({ color: 0x000000, metalness: 0.0, roughness: 1.0 });
                    const sphere = new THREE.Mesh(sphereGeometry, material);

                    const leftEye = new THREE.Mesh(eyeGeometry, eyeMaterial);
                    leftEye.position.set(-0.3, 0.25, sphereRadius * 0.9);
                    const rightEye = new THREE.Mesh(eyeGeometry, eyeMaterial);
                    rightEye.position.set(0.3, 0.25, sphereRadius * 0.9);
                    const leftPupil = new THREE.Mesh(pupilGeometry, pupilMaterial);
                    leftPupil.position.z = 0.01;
                    const rightPupil = new THREE.Mesh(pupilGeometry, pupilMaterial);
                    rightPupil.position.z = 0.01;
                    leftEye.add(leftPupil);
                    rightEye.add(rightPupil);
                    sphere.add(leftEye, rightEye);

                    const speechBubbleDiv = document.createElement('div');
                    speechBubbleDiv.className = 'speech-bubble';
                    speechBubbleContainer.appendChild(speechBubbleDiv);
                    
                    sphere.userData = {
                        isBlinking: false, blinkStartTime: 0, nextBlinkTime: 2 + Math.random() * 6,
                        offset: Math.random() * Math.PI * 2,
                        isTalking: false, talkStartTime: 0, 
                        // MODIFIED: Stagger initial talks and make them rarer
                        nextTalkTime: 5 + Math.random() * 15, 
                        talkDuration: 3,
                        speechBubble: speechBubbleDiv
                    };
                    
                    // MODIFIED: Start at center and animate out
                    const targetX = (j - (gridSize - 1) / 2) * spacing;
                    const targetZ = (i - (gridSize - 1) / 2) * spacing;
                    sphere.position.set(0, 0, 0);

                    new TWEEN.Tween(sphere.position)
                        .to({ x: targetX, y: 0, z: targetZ }, 1500)
                        .easing(TWEEN.Easing.Exponential.Out)
                        .delay(i * 50 + j * 50)
                        .start();

                    scene.add(sphere);
                    spheres.push(sphere);
                    row.push(sphere);
                }
                sphereGrid.push(row);
            }

            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    const sphere1 = sphereGrid[i][j];
                    if (j + 1 < gridSize) {
                        const sphere2 = sphereGrid[i][j+1];
                        const lineGeometry = new THREE.BufferGeometry().setFromPoints([sphere1.position, sphere2.position]);
                        const line = new THREE.Line(lineGeometry, lineMaterial);
                        scene.add(line);
                        lines.push({ line: line, sphere1: sphere1, sphere2: sphere2 });
                    }
                    if (i + 1 < gridSize) {
                        const sphere2 = sphereGrid[i+1][j];
                        const lineGeometry = new THREE.BufferGeometry().setFromPoints([sphere1.position, sphere2.position]);
                        const line = new THREE.Line(lineGeometry, lineMaterial);
                        scene.add(line);
                        lines.push({ line: line, sphere1: sphere1, sphere2: sphere2 });
                    }
                }
            }
            
            let isMorphed = false;
            const morphButton = document.getElementById('morph-button');
            
            function triggerMorph() {
                const targetShape = isMorphed ? 'parabola' : 'grid';

                spheres.forEach((sphere) => {
                    const x = sphere.position.x;
                    const z = sphere.position.z;
                    let targetY = 0;
                    if (targetShape === 'parabola') {
                        targetY = -0.15 * (x*x + z*z) + 8; 
                    }
                    new TWEEN.Tween(sphere.position)
                        .to({ y: targetY }, 2000)
                        .easing(TWEEN.Easing.Quadratic.InOut)
                        .start();
                });
            }

            morphButton.addEventListener('click', () => {
                isMorphed = !isMorphed;
                morphButton.textContent = isMorphed ? 'Turn off!' : 'Excite!';
                triggerMorph();
            });

            const clock = new THREE.Clock();
            const blinkDuration = 0.15;
            const positionVector = new THREE.Vector3();

            function animate() {
                requestAnimationFrame(animate);
                const elapsedTime = clock.getElapsedTime();
                TWEEN.update();

                spheres.forEach((sphere) => {
                    const yOffset = Math.sin(elapsedTime * 15 + sphere.userData.offset) * 0.1;
                    sphere.position.y += yOffset;
                    sphere.lookAt(camera.position);

                    const leftEye = sphere.children[0];
                    const rightEye = sphere.children[1];
                    if (sphere.userData.isBlinking) {
                        if (elapsedTime - sphere.userData.blinkStartTime > blinkDuration) {
                            leftEye.scale.y = 1; rightEye.scale.y = 1;
                            sphere.userData.isBlinking = false;
                            sphere.userData.nextBlinkTime = elapsedTime + 2 + Math.random() * 6;
                        }
                    } else if (elapsedTime > sphere.userData.nextBlinkTime) {
                        sphere.userData.isBlinking = true;
                        sphere.userData.blinkStartTime = elapsedTime;
                        leftEye.scale.y = 0.1; rightEye.scale.y = 0.1;
                    }
                    
                    if (sphere.userData.isTalking) {
                        if (elapsedTime - sphere.userData.talkStartTime > sphere.userData.talkDuration) {
                            sphere.userData.speechBubble.style.display = 'none';
                            sphere.userData.isTalking = false;
                            // MODIFIED: Make subsequent talks rarer
                            sphere.userData.nextTalkTime = elapsedTime + 30 + Math.random() * 30;
                        }
                    } else if (elapsedTime > sphere.userData.nextTalkTime) {
                        sphere.userData.isTalking = true;
                        sphere.userData.talkStartTime = elapsedTime;
                        sphere.userData.speechBubble.textContent = phrases[Math.floor(Math.random() * phrases.length)];
                        sphere.userData.speechBubble.style.display = 'block';
                    }

                    positionVector.copy(sphere.position);
                    positionVector.project(camera);
                    const screenX = (positionVector.x + 1) * latticeCanvas.clientWidth / 2;
                    const screenY = (-positionVector.y + 1) * latticeCanvas.clientHeight / 2;
                    sphere.userData.speechBubble.style.left = `${screenX}px`;
                    sphere.userData.speechBubble.style.top = `${screenY}px`;
                    
                    sphere.position.y -= yOffset;
                });
                
                lines.forEach(data => {
                    const positions = data.line.geometry.attributes.position;
                    positions.setXYZ(0, data.sphere1.position.x, data.sphere1.position.y, data.sphere1.position.z);
                    positions.setXYZ(1, data.sphere2.position.x, data.sphere2.position.y, data.sphere2.position.z);
                    positions.needsUpdate = true;
                });

                renderer.render(scene, camera);
            }

            function onWindowResize() {
                const container = latticeCanvas.parentElement;
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            }

            window.addEventListener('resize', onWindowResize);
            animate();
        }

        // --- Research Modal Logic ---
        const modal = document.getElementById('research-modal');
        const modalContent = document.getElementById('modal-content');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const researchCards = document.querySelectorAll('.research-card');

        researchCards.forEach(card => {
            card.addEventListener('click', () => {
                // If there's an external link, go to it. Otherwise, open the modal.
                const link = card.dataset.link;
                if (link) {
                    window.open(link, '_blank');
                    return;
                }

                document.getElementById('modal-title').textContent = card.dataset.title;
                document.getElementById('modal-description').textContent = card.dataset.description;
                document.getElementById('modal-img').src = card.dataset.imgSrc;
                modal.classList.remove('opacity-0', 'pointer-events-none');
                modalContent.classList.remove('scale-95', 'opacity-0');
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
            });
        });

        function closeModal() {
            modal.classList.add('opacity-0', 'pointer-events-none');
            modalContent.classList.add('scale-95', 'opacity-0');
            document.body.style.overflow = '';
        }

        closeModalBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });
        
        // --- Publications Pagination ---
        const publications = [
            { title: "On the coupled bandgaps in a new class of metamaterials made of parallel beams", authors: "A Heidari Shirazi, R Abedi", journal: "International Journal of Solids and Structures", year: 2025, doi: "10.1016/j.ijsolstr.2025.113339", link: "https://doi.org/10.1016/j.ijsolstr.2025.113339" },
            { title: "Vibrational analysis of a metamaterial beam including a nonlinear local resonator based on the slider-crank mechanism concept", authors: "H M-Sedighi, A Heidari Shirazi", journal: "International Journal of Non-Linear Mechanics", year: 2020, doi: "10.1016/j.ijnonlinmec.2020.103445", link: "https://doi.org/10.1016/j.ijnonlinmec.2020.103445" },
            { title: "Coupled Rotational‚ÄìTranslational Local Resonators for Broadband Vibration Suppression in Elastic Metamaterials", authors: "A Heidari Shirazi, H M-Sedighi", journal: "Acta Mechanica Solida Sinica", year: 2020, doi: "10.1007/s10338-020-00171-4", link: "https://doi.org/10.1007/s10338-020-00171-4" },
            { title: "On the response of fluid-conveying viscoelastic functionally graded nanotubes subjected to longitudinal magnetic field based on a nonlocal strain gradient shell model", authors: "H M-Sedighi, A Heidari Shirazi", journal: "The European Physical Journal Plus", year: 2020, doi: "10.1140/epjp/s13360-020-00366-4", link: "https://doi.org/10.1140/epjp/s13360-020-00366-4" },
            { title: "Application of multiple scale method in analysis of vibrational behavior of a metamaterial beam containing nonlinear local resonator", authors: "H M-Sedighi, A Heidari Shirazi", journal: "Modares Mechanical Engineering", year: 2019, link: "https://mme.modares.ac.ir/article-15-23668-en.html" },
            { title: "Dynamic stability of viscoelastic micro-tubes conveying fluid and embedded in a visco-Pasternak foundation based on the modified strain gradient theory", authors: "A Farokhi, H M-Sedighi, A Heidari Shirazi", journal: "Proceedings of the IMechE, Part L: Journal of Materials: Design and Applications", year: 2021, doi: "10.1177/14644207211029202", link: "https://doi.org/10.1177/14644207211029202" },
            { title: "Influence of nonlinear energy sink on the chaotic behaviors of a FGM viscoelastic microbeam subjected to a uniform temperature field and an axial force", authors: "A Farokhi, H M-Sedighi, A Heidari Shirazi", journal: "Proceedings of the IMechE, Part L: Journal of Materials: Design and Applications", year: 2021, doi: "10.1177/14644207211051515", link: "https://doi.org/10.1177/14644207211051515" }
        ];

        const publicationsContainer = document.getElementById('publications-container');
        const prevPageBtn = document.getElementById('prevPageBtn');
        const nextPageBtn = document.getElementById('nextPageBtn');
        const pageIndicator = document.getElementById('pageIndicator');
        const itemsPerPage = 4;
        let currentPage = 1;

        function displayPublications() {
            publicationsContainer.innerHTML = '';
            const totalPages = Math.ceil(publications.length / itemsPerPage);
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedItems = publications.slice(startIndex, endIndex);

            paginatedItems.forEach(pub => {
                const pubElement = document.createElement('div');
                pubElement.className = 'card rounded-xl p-5 text-sm';
                pubElement.innerHTML = `
                    <p class="font-semibold text-dark">${pub.title}</p>
                    <p class="text-subtle mt-1">${pub.authors}</p>
                    <p class="mt-2">
                        <span class="italic">${pub.journal}</span>, ${pub.year}.
                        ${pub.link ? `<a href="${pub.link}" target="_blank" class="highlight-link ml-2">View Publication</a>` : ''}
                    </p>
                `;
                publicationsContainer.appendChild(pubElement);
            });

            pageIndicator.textContent = `Page ${currentPage} of ${totalPages}`;
            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage === totalPages;
        }

        prevPageBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                displayPublications();
            }
        });

        nextPageBtn.addEventListener('click', () => {
            if (currentPage < Math.ceil(publications.length / itemsPerPage)) {
                currentPage++;
                displayPublications();
            }
        });

        displayPublications(); // Initial display
    });
  </script>
</body>
</html>

