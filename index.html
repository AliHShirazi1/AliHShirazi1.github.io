<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#ffffff" />
  <title>Ali Heidari Shirazi ‚Äî Portfolio</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüî¨</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Source+Serif+Pro:wght@600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <!-- MathJax for LaTeX rendering --><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  
  <style>
    :root {
      --bg-light: #f9fafb;
      --card-bg: #ffffff;
      --card-border: #e5e7eb;
      --text-dark: #1f2937;
      --text-main: #374151;
      --text-subtle: #6b7280;
      --accent-primary: #2563eb;
    }

    body {
      background-color: var(--bg-light);
      color: var(--text-main);
      font-family: 'Inter', sans-serif;
      line-height: 1.7;
    }
    
    .font-serif {
      font-family: 'Source Serif Pro', serif;
    }

    .card {
      background-color: var(--card-bg);
      border: 1px solid var(--card-border);
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.07), 0 4px 6px -4px rgb(0 0 0 / 0.07);
    }
    
    .highlight-link {
      color: var(--text-dark);
      font-weight: 500;
      transition: color 0.2s;
      position: relative;
      text-decoration: none;
    }
     .highlight-link::after {
      content: '';
      position: absolute;
      width: 100%;
      transform: scaleX(0);
      height: 1px;
      bottom: -2px;
      left: 0;
      background-color: var(--accent-primary);
      transform-origin: bottom right;
      transition: transform 0.25s ease-out;
    }
    .highlight-link:hover::after {
      transform: scaleX(1);
      transform-origin: bottom left;
    }
    .highlight-link:hover {
      color: var(--accent-primary);
    }

    .scroll-card {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .scroll-card.is-visible {
      opacity: 1;
      transform: translateY(0);
    }

    #research-modal {
      transition: opacity 0.3s ease-in-out;
      background-color: rgba(0,0,0,0.5);
    }
    #research-modal .modal-content {
      transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
    }

    /* Style for scrolled navbar */
    .nav-scrolled {
      background-color: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(8px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.04);
      border-bottom: 1px solid var(--card-border);
    }
    
    /* Custom aspect ratio for research card images */
    .aspect-card-image {
        aspect-ratio: 1 / 1.3;
    }
    .resume-item ul {
      list-style-type: disc;
      padding-left: 1.5rem;
    }
  </style>
</head>
<body class="overflow-x-hidden">
  
  <!-- Navigation Bar --><nav id="navbar" class="fixed top-0 left-0 right-0 z-40 transition-all duration-300">
    <div class="max-w-5xl mx-auto px-4 sm:px-8">
      <div class="flex justify-between items-center h-16">
        <a href="#home" class="font-serif font-bold text-lg text-dark">A. H. Shirazi</a>
        <div class="hidden md:flex items-center space-x-8">
          <a href="#research" class="highlight-link text-sm">Research</a>
          <a href="#education" class="highlight-link text-sm">Education</a>
          <a href="#experience" class="highlight-link text-sm">Experience</a>
          <a href="#publications" class="highlight-link text-sm">Publications</a>
          <a href="#skills" class="highlight-link text-sm">Skills</a>
          <a href="#awards" class="highlight-link text-sm">Awards</a>
        </div>
      </div>
    </div>
  </nav>

  <div class="max-w-5xl mx-auto px-4 sm:px-8">
    <!-- Header Section --><header id="home" class="grid grid-cols-1 md:grid-cols-2 gap-16 min-h-screen items-center pt-24 md:pt-0">
      <!-- Left Intro Content --><div>
        <img 
          src="profile.png" 
          alt="Profile picture of Ali Heidari Shirazi" 
          class="rounded-full w-48 h-48 border-4 border-white shadow-lg mb-8 object-cover"
        >
        <h1 class="text-4xl md:text-5xl font-bold tracking-tight font-serif text-dark">Ali Heidari Shirazi</h1>
        <p class="text-xl text-accent-primary mt-4 font-medium">Ph.D. in Mechanical Engineering</p>
        <div class="mt-6 text-main space-y-4 max-w-lg">
            <p>
                I am a Ph.D. candidate and Graduate Research Assistant at the University of Tennessee, Knoxville, specializing in the dynamics of mechanical metamaterials. My work focuses on understanding how disorder and nonlinearities affect wave propagation characteristics.
            </p>
        </div>
        <div class="mt-8 flex items-center gap-8">
          <a href="mailto:aheidar1@vols.utk.edu" class="highlight-link">Email</a>
          <a href="https://www.linkedin.com/in/alihshirazi/" target="_blank" class="highlight-link">LinkedIn</a>
          <a href="https://scholar.google.com/citations?user=jsP5-kQAAAAJ&hl=en" target="_blank" class="highlight-link">Google Scholar</a>
        </div>
      </div>
      <!-- Right Fractal Content --><div class="hidden md:flex flex-col items-center justify-center">
        <div class="h-[60vh] w-full">
            <canvas id="mandelbulb-canvas" class="w-full h-full cursor-grab active:cursor-grabbing rounded-lg"></canvas>
        </div>
        <div class="w-full text-center mt-4 px-4">
            <p class="text-xs text-subtle italic">A biological cell? An alien artifact? The blueprint for an acoustic resonator? The Mandelbulb is a gateway to infinite complexity. Where could your scientific curiosity lead? Let's collaborate and discover what's next.</p>
            <p class="text-xs text-subtle mt-2">The core transformation $v \mapsto v^n + c$ is defined in spherical coordinates $(r, \phi, \theta)$ as: $$ (r, \phi, \theta) \mapsto (r^n, n\phi, n\theta) $$</p>
        </div>
      </div>
    </header>
    
    <!-- Scrolling Full-Width Cards --><main class="space-y-20 sm:space-y-28 py-16">
      
      <!-- Research Focus Section --><section id="research" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Research Focus</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="research-card group cursor-pointer" data-title="Disordered Metamaterials" data-description="Investigating the effects of positional, material, and geometrical disorder on Bragg-scattering and locally resonant metamaterials to understand and predict their complex wave propagation behavior. (Ongoing study)" data-img-src="research1.png">
                <div class="card rounded-xl p-4 h-full">
                  <div class="overflow-hidden rounded-lg mb-4 aspect-card-image">
                    <img src="research1.png" alt="Abstract representation of disordered metamaterials" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                  </div>
                  <h3 class="font-semibold text-dark">Disordered Metamaterials</h3>
                </div>
            </div>
            <div class="research-card group cursor-pointer" data-title="Nonlinear Dynamics" data-description="Analyzing the influence of chaos, bifurcation, and dead-zone nonlinearities on the bandgaps of mechanical systems through advanced time-domain simulations and analytical models. (Under review)" data-img-src="research4.png">
                <div class="card rounded-xl p-4 h-full">
                  <div class="overflow-hidden rounded-lg mb-4 aspect-card-image">
                    <img src="research4.png" alt="Abstract representation of nonlinear dynamics" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                  </div>
                  <h3 class="font-semibold text-dark">Nonlinear Dynamics</h3>
                </div>
            </div>
            <div class="research-card group cursor-pointer" data-title="Wave Propagation" data-description="Analyzing diffraction mechanisms (EM/TM, elastic wave) and higher order mode (HOM) generation in MMs. (Ongoing study)" data-img-src="research3.png">
                <div class="card rounded-xl p-4 h-full">
                  <div class="overflow-hidden rounded-lg mb-4 aspect-card-image">
                    <img src="research3.png" alt="Abstract representation of wave propagation" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                  </div>
                  <h3 class="font-semibold text-dark">Wave Propagation</h3>
                </div>
            </div>
            <div class="research-card group cursor-pointer" data-title="Dynamic Characterization" data-description="Developing and applying spacetime Fourier transforms and custom C++ tools to resolve analytical challenges in the homogenization of dispersive and disordered metamaterials. (Published study)" data-link="https://doi.org/10.1016/j.ijsolstr.2025.113339" data-link-text="(Published study)" data-img-src="research2.png">
                <div class="card rounded-xl p-4 h-full">
                  <div class="overflow-hidden rounded-lg mb-4 aspect-card-image">
                    <img src="research2.png" alt="Abstract representation of computational methods" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                  </div>
                  <h3 class="font-semibold text-dark">Dynamic Characterization</h3>
                </div>
            </div>
        </div>
      </section>

      <!-- Education Section --><section id="education" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Education</h2>
        <div class="space-y-8">
          <div class="card rounded-xl p-6">
            <div class="flex justify-between items-start">
              <h3 class="font-semibold text-dark text-lg">University of Tennessee, Knoxville</h3>
              <p class="text-sm text-subtle text-right whitespace-nowrap">May 2024 ‚Äì Expected Fall 2026</p>
            </div>
            <p class="text-md text-main mt-1">Ph.D. in Mechanical Engineering</p>
            <p class="text-sm text-subtle mt-2">Dissertation topic: <span class="font-semibold">The Effect of Disorder on Elastodynamic Metamaterials.</span></p>
            <p class="text-sm text-subtle">Overall GPA: 4.0</p>
          </div>
          <div class="card rounded-xl p-6">
            <div class="flex justify-between items-start">
              <h3 class="font-semibold text-dark text-lg">University of Tennessee, Knoxville</h3>
              <p class="text-sm text-subtle text-right whitespace-nowrap">June 2022 ‚Äì May 2024</p>
            </div>
            <p class="text-md text-main mt-1">M.Sc. in Mechanical Engineering</p>
            <p class="text-sm text-subtle">Overall GPA: 4.0</p>
          </div>
          <div class="card rounded-xl p-6">
            <div class="flex justify-between items-start">
              <h3 class="font-semibold text-dark text-lg">Shahid Chamran University, Ahvaz</h3>
              <p class="text-sm text-subtle text-right whitespace-nowrap">September 2015 ‚Äì February 2020</p>
            </div>
            <p class="text-md text-main mt-1">B.S. in Mechanical Engineering</p>
            <p class="text-sm text-subtle mt-2">Thesis title: <span class="font-semibold italic">Application of multiple scale method in analysis of vibrational behavior of a metamaterial beam.</span></p>
            <p class="text-sm text-subtle">Overall GPA: 3.34</p>
          </div>
        </div>
      </section>

      <!-- Research Experience Section --><section id="experience" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Research Experience</h2>
        <div class="space-y-8">
          <div class="card rounded-xl p-6 resume-item">
            <div class="flex justify-between items-start">
              <h3 class="font-semibold text-dark text-lg">Graduate Research Assistant</h3>
              <p class="text-sm text-subtle text-right whitespace-nowrap">June 2022 ‚Äì Present</p>
            </div>
            <p class="text-sm text-subtle">University of Tennessee, Knoxville | Advisor: Reza Abedi, Ph.D.</p>
            <ul class="mt-4 space-y-2 text-sm text-main">
              <li>Demonstrated the destructive influence of chaos and bifurcation on bandgaps in systems with dead-zone/backlash nonlinearities through time-domain simulations.</li>
              <li>Investigated the effects of positional, material, and geometrical disorder on Bragg-scattering and locally resonant metamaterials.</li>
              <li>Analyzed wave diffraction and the emergence of higher-order modes in layered media.</li>
              <li>Discovered coupled bandgaps in a novel class of metamaterials utilizing parallel beams.</li>
              <li>Applied spacetime Fourier transforms to resolve branch ambiguity challenges in the dynamic homogenization of dispersive and disordered metamaterials.</li>
              <li>Developed a C++ toolset for analyzing wave propagation and retrieving dynamic properties in one-dimensional disordered media.</li>
            </ul>
          </div>
          <div class="card rounded-xl p-6 resume-item">
            <div class="flex justify-between items-start">
              <h3 class="font-semibold text-dark text-lg">Research Assistant</h3>
              <p class="text-sm text-subtle text-right whitespace-nowrap">September 2015 ‚Äì February 2020</p>
            </div>
            <p class="text-sm text-subtle">Shahid Chamran University, Ahvaz | Advisor: Hamid M-Sedighi, Ph.D.</p>
            <ul class="mt-4 space-y-2 text-sm text-main">
              <li>Applied perturbation methods to analyze the governing equations of nonlinear dynamical systems.</li>
              <li>Investigated coupled rotational‚Äìtranslational local resonators for broadband vibration suppression in elastic metamaterials.</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Publications Section --><section id="publications" class="scroll-card scroll-mt-24">
          <h2 class="text-3xl font-bold font-serif text-dark mb-2">Journal Publications</h2>
          <p class="text-sm text-subtle mb-8">Total Citations: 465  &bull; h-index: 7 &bull; i10-index: 6</p>
          <div id="publications-container" class="space-y-4">
            <!-- Publications will be injected here --></div>
          <div class="mt-8 flex justify-between items-center">
            <button id="prevPageBtn" class="bg-white border border-gray-200 rounded-lg px-5 py-2.5 text-sm font-medium text-main hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">Previous</button>
            <span id="pageIndicator" class="text-sm text-subtle"></span>
            <button id="nextPageBtn" class="bg-white border border-gray-200 rounded-lg px-5 py-2.5 text-sm font-medium text-main hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">Next</button>
          </div>
      </section>

      <!-- Skills Section --><section id="skills" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Skills</h2>
        <div class="grid md:grid-cols-2 gap-4">
            <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">AI & Machine Learning</div>
              <p class="text-sm text-main">LLMs, RAG, AI Agents, CNN, TensorFlow</p>
            </div>
            <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">Programming</div>
              <p class="text-sm text-main">Python, C++ (OOP), HTML</p>
            </div>
            <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">Engineering Software</div>
              <p class="text-sm text-main">COMSOL, SolidWorks, Ansys, Recurdyn, MSC ADAMS</p>
            </div>
            <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">Mathematical Software</div>
              <p class="text-sm text-main">Matlab, Simulink, Maple, Mathematica</p>
            </div>
             <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">Graphical Design & Visualization</div>
              <p class="text-sm text-main">Adobe Creative Suite (Illustrator, Photoshop), 3D Studio Max</p>
            </div>
            <div class="card rounded-xl p-6">
              <div class="font-semibold text-dark text-lg mb-1">Language Competencies</div>
              <p class="text-sm text-main">Persian (Native), English (Fluent)</p>
            </div>
        </div>
      </section>

       <!-- Honors and Awards Section --><section id="awards" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Honors and Awards</h2>
        <div class="space-y-4">
            <div class="card rounded-xl p-6 flex justify-between items-center">
              <p class="font-semibold text-dark">Shipley-Swann Graduate School Fellowship Awardee</p>
              <p class="text-sm text-subtle whitespace-nowrap">2025‚Äì2026</p>
            </div>
            <div class="card rounded-xl p-6 flex justify-between items-center">
              <p class="font-semibold text-dark">Graduate Student Senate Award for Excellence in Graduate Research</p>
              <p class="text-sm text-subtle whitespace-nowrap">2025</p>
            </div>
            <div class="card rounded-xl p-6 flex justify-between items-center">
              <p class="font-semibold text-dark">First Place, National Student Competition in Glider Design, Sharif University</p>
              <p class="text-sm text-subtle whitespace-nowrap">2017</p>
            </div>
            <div class="card rounded-xl p-6 flex justify-between items-center">
              <p class="font-semibold text-dark">Top 5%, National University Entrance Exam of Iran</p>
              <p class="text-sm text-subtle whitespace-nowrap">2015</p>
            </div>
        </div>
      </section>

      <!-- Projects Section --><section id="projects" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Projects</h2>
        <div class="space-y-8">
            <div class="card rounded-xl p-6 resume-item">
                <h3 class="font-semibold text-dark text-lg">Active Projects</h3>
                <ul class="mt-4 space-y-4 text-sm text-main">
                    <li>
                        <p class="font-semibold">Disorder Effects on Metamaterial Bandgaps:</p>
                        <p>Exploring how structural and material variability influence the robustness of Bragg- and resonance-based bandgaps.</p>
                    </li>
                    <li>
                        <p class="font-semibold">Multi-Beam Metamaterial Design:</p>
                        <p>Designing multi-beam structures that enable advanced dynamic modes and broadened attenuation ranges.</p>
                    </li>
                    <li>
                        <p class="font-semibold">Wave Diffraction and Higher Order Modes:</p>
                        <p>Analyzing diffraction mechanisms and higher order mode generation in layered media.</p>
                    </li>
                </ul>
            </div>
            <div class="card rounded-xl p-6 resume-item">
                <h3 class="font-semibold text-dark text-lg">Academic Projects</h3>
                <ul class="mt-4 space-y-2 text-sm text-main">
                    <li>Developed a Retrieval-Augmented Generation (RAG) chatbot and LLM agents using Python and LangChain.</li>
                    <li>Optimized bandgaps/wave guides using heuristic optimization techniques.</li>
                    <li>Performed statistical analysis of wave property variations in a randomized one-dimensional domain.</li>
                    <li>Homogenized a two-phase medium through microstructural image analysis using Convolutional Neural Networks (CNN).</li>
                    <li>Extended Slider-Crank mechanism concept as a nonlinear local resonator in metamaterial beams.</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Professional Service Section --><section id="service" class="scroll-card scroll-mt-24">
        <h2 class="text-3xl font-bold font-serif text-dark mb-10">Professional Service</h2>
        <div class="grid md:grid-cols-2 gap-8">
            <div class="card rounded-xl p-6 resume-item">
                <h3 class="font-semibold text-dark text-lg mb-4">Journal Peer-Reviewer</h3>
                <ul class="space-y-2 text-sm text-main">
                    <li>Journal of Applied Physics (3 papers)</li>
                    <li>Mechanics of Materials (1 paper)</li>
                    <li>International Journal of Solids and Structures (1 paper)</li>
                    <li>Proceedings of the IMechE, Part L (6 papers)</li>
                </ul>
            </div>
            <div class="card rounded-xl p-6 resume-item">
                <h3 class="font-semibold text-dark text-lg mb-4">Memberships and Leadership</h3>
                <ul class="space-y-2 text-sm text-main">
                    <li>President, Graduate Association of MABE Engineers (GAME)</li>
                    <li>Rocky Top President‚Äôs Institute (RTPI)</li>
                    <li>Member, American Society of Mechanical Engineers (ASME)</li>
                </ul>
            </div>
        </div>
    </section>

    </main>
  </div>

  <!-- Footer --><footer class="border-t border-gray-200">
    <div class="max-w-5xl mx-auto px-4 sm:px-8 py-12 text-center text-subtle">
      <div class="flex justify-center items-center gap-8 mb-6">
          <a href="mailto:aheidar1@vols.utk.edu" class="highlight-link text-sm">Email</a>
          <a href="https://www.linkedin.com/in/alihshirazi/" target="_blank" class="highlight-link text-sm">LinkedIn</a>
          <a href="https://scholar.google.com/citations?user=jsP5-kQAAAAJ&hl=en" target="_blank" class="highlight-link text-sm">Google Scholar</a>
      </div>
      <p class="text-sm">&copy; 2025 Ali Heidari Shirazi. All rights reserved.</p>
    </div>
  </footer>


  <!-- Research Card Modal --><div id="research-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 opacity-0 pointer-events-none">
    <div id="modal-content" class="modal-content bg-white rounded-xl w-full max-w-lg p-6 relative transform scale-95 opacity-0">
      <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 transition-colors z-10 text-4xl leading-none">&times;</button>
        <div>
          <img id="modal-img" src="" alt="" class="rounded-lg w-full h-auto object-cover mb-4">
          <h2 id="modal-title" class="text-2xl font-bold font-serif text-dark"></h2>
          <p id="modal-description" class="text-main mt-2"></p>
        </div>
    </div>
  </div>

  <!-- GLSL SHADER CODE --><script id="vertexShader" type="x-shader/x-vertex">
    void main() {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  </script>

  <script id="fragmentShader" type="x-shader/x-fragment">
    // --- Uniforms passed from JavaScript ---
    uniform vec2 u_resolution;
    uniform float u_time;
    uniform vec2 u_mouse;
    uniform float u_power;

    // --- Raymarching constants ---
    const int MAX_STEPS = 100;
    const float MAX_DIST = 100.0;
    const float SURF_DIST = 0.001;

    // --- Mandelbulb Signed Distance Estimator (SDE) ---
    float mandelbulbSDE(vec3 pos) {
        vec3 z = pos;
        float dr = 1.0;
        float r = 0.0;
        for (int i = 0; i < 8; i++) {
            r = length(z);
            if (r > 2.0) break;
            
            float theta = acos(z.z / r);
            float phi = atan(z.y, z.x);
            dr = pow(r, u_power - 1.0) * u_power * dr + 1.0;
            
            float zr = pow(r, u_power);
            theta = theta * u_power;
            phi = phi * u_power;
            
            z = zr * vec3(sin(theta) * cos(phi), sin(theta) * sin(phi), cos(theta));
            z += pos;
        }
        return 0.5 * log(r) * r / dr;
    }

    float getDist(vec3 p) {
        return mandelbulbSDE(p);
    }

    float rayMarch(vec3 ro, vec3 rd) {
        float dO = 0.0;
        for (int i = 0; i < MAX_STEPS; i++) {
            vec3 p = ro + rd * dO;
            float dS = getDist(p);
            dO += dS;
            if (dO > MAX_DIST || dS < SURF_DIST) break;
        }
        return dO;
    }

    vec3 getNormal(vec3 p) {
        float d = getDist(p);
        vec2 e = vec2(0.001, 0);
        vec3 n = d - vec3(
            getDist(p - e.xyy),
            getDist(p - e.yxy),
            getDist(p - e.yyx)
        );
        return normalize(n);
    }
    
    mat3 rotateY(float angle) {
        float s = sin(angle);
        float c = cos(angle);
        return mat3(c, 0.0, -s, 0.0, 1.0, 0.0, s, 0.0, c);
    }
    mat3 rotateX(float angle) {
        float s = sin(angle);
        float c = cos(angle);
        return mat3(1.0, 0.0, 0.0, 0.0, c, s, 0.0, -s, c);
    }

    void main() {
        // --- Responsive UV calculation to prevent cropping ---
        vec2 uv = (gl_FragCoord.xy - 0.5 * u_resolution.xy) / min(u_resolution.x, u_resolution.y);

        vec3 ro = vec3(0, 0, 2.5);
        vec3 rd = normalize(vec3(uv, -1.0));

        mat3 rot = rotateY(u_mouse.x) * rotateX(u_mouse.y);
        ro = rot * ro;
        rd = rot * rd;
        
        float d = rayMarch(ro, rd);

        // --- BACKGROUND COLOR to match website ---
        vec3 col = vec3(0.976, 0.98, 0.984); 

        if (d < MAX_DIST) {
            vec3 p = ro + rd * d;
            vec3 normal = getNormal(p);

            // --- Light 1 (Key Light) - Slightly warm, primary light ---
            vec3 lightPos1 = vec3(2.0, 2.0, 3.0);
            lightPos1 = rot * lightPos1;
            vec3 lightDir1 = normalize(lightPos1 - p);
            float diffuse1 = max(0.0, dot(normal, lightDir1));
            
            // --- Light 2 (Fill Light) - Cool blue ---
            vec3 lightPos2 = vec3(-3.0, -1.0, 2.0);
            lightPos2 = rot * lightPos2;
            vec3 lightDir2 = normalize(lightPos2 - p);
            float diffuse2 = max(0.0, dot(normal, lightDir2));

            // --- Light 3 (Accent Light) - Warm orange ---
            vec3 lightPos3 = vec3(0.0, -3.0, -2.0); // Positioned to hit from below/behind
            lightPos3 = rot * lightPos3;
            vec3 lightDir3 = normalize(lightPos3 - p);
            float diffuse3 = max(0.0, dot(normal, lightDir3));


            float ambient = 0.5 + 0.5 * dot(normal, vec3(0.0, 1.0, 0.0));
            
            // --- Material Color ---
            vec3 accentPrimaryBlue = vec3(0.145, 0.388, 0.922); 
            vec3 deepBlue = vec3(0.05, 0.15, 0.4); 
            vec3 materialColor = mix(deepBlue, accentPrimaryBlue, 0.5 + 0.5 * normal.y);
            materialColor = mix(materialColor, deepBlue, 0.5 + 0.5 * sin(p.z * 5.0));

            // --- Combine Lights ---
            vec3 light1Color = vec3(1.0, 0.9, 0.8) * 0.7; // Warm key light (slightly desaturated)
            vec3 light2Color = vec3(0.7, 0.8, 1.0) * 0.5; // Cool blue fill light
            vec3 light3Color = vec3(1.0, 0.5, 0.1) * 0.4; // Vibrant orange accent light (reduced intensity)


            col = materialColor * (diffuse1 * light1Color + diffuse2 * light2Color + diffuse3 * light3Color + ambient * 0.5);
        }
        
        gl_FragColor = vec4(col, 1.0);
    }
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Navbar Scroll Effect ---
        const navbar = document.getElementById('navbar');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                navbar.classList.add('nav-scrolled');
            } else {
                navbar.classList.remove('nav-scrolled');
            }
        });

        const scrollObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.scroll-card').forEach(card => {
            scrollObserver.observe(card);
        });

      // --- Three.js Mandelbulb Raymarcher ---
      const canvas = document.getElementById('mandelbulb-canvas');
      if (canvas) { // Always try to init, but shader will handle visibility
          let scene, camera, renderer, material, plane;
          const clock = new THREE.Clock();

          const uniforms = {
              u_time: { value: 0.0 },
              u_resolution: { value: new THREE.Vector2() },
              u_mouse: { value: new THREE.Vector2() },
              u_power: { value: 8.0 }
          };
          
          let isDragging = false;
          let hasDragged = false;
          let previousMousePosition = { x: 0, y: 0 };
          let targetRotation = { x: -0.5, y: 0.5 }; // Start with a slight angle
          let actualRotation = { x: -0.5, y: 0.5 };

          function init() {
              const container = canvas.parentElement;
              scene = new THREE.Scene();
              camera = new THREE.Camera();

              renderer = new THREE.WebGLRenderer({ 
                  canvas: canvas, 
                  antialias: true,
                  alpha: true // Set canvas to be transparent
              });
              renderer.setClearColor(0x000000, 0); // Transparent clear color
              renderer.setSize(container.clientWidth, container.clientHeight);
              renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
              
              uniforms.u_resolution.value.x = renderer.domElement.width;
              uniforms.u_resolution.value.y = renderer.domElement.height;

              const geometry = new THREE.PlaneBufferGeometry(2, 2);
              material = new THREE.ShaderMaterial({
                  uniforms: uniforms,
                  vertexShader: document.getElementById('vertexShader').textContent,
                  fragmentShader: document.getElementById('fragmentShader').textContent,
                  transparent: true // Shader material is transparent
              });

              plane = new THREE.Mesh(geometry, material);
              scene.add(plane);

              animate();
              
              canvas.addEventListener('mousedown', onMouseDown);
              canvas.addEventListener('mousemove', onMouseMove);
              canvas.addEventListener('mouseup', onMouseUp);
              canvas.addEventListener('mouseleave', onMouseUp);
              window.addEventListener('resize', onWindowResize);
          }

          function onMouseDown(e) {
              isDragging = true;
              hasDragged = false;
              previousMousePosition.x = e.clientX;
              previousMousePosition.y = e.clientY;
          }

          function onMouseMove(e) {
              if (isDragging) {
                  hasDragged = true;
                  const deltaX = e.clientX - previousMousePosition.x;
                  const deltaY = e.clientY - previousMousePosition.y;
                  
                  targetRotation.y += deltaX * 0.01;
                  targetRotation.x += deltaY * 0.01;

                  previousMousePosition.x = e.clientX;
                  previousMousePosition.y = e.clientY;
              }
          }

          function onMouseUp() {
              isDragging = false;
          }

          function animate() {
              requestAnimationFrame(animate);
              
              // Smoothly interpolate the actual rotation towards the target rotation (lerp)
              actualRotation.x += (targetRotation.x - actualRotation.x) * 0.05;
              actualRotation.y += (targetRotation.y - actualRotation.y) * 0.05;

              // Auto-rotate if not dragging
              if (!isDragging) {
                  targetRotation.y += 0.001;
              }

              // --- FRACTAL POWER ANIMATION ---
              const basePower = 7.0;
              const powerAmplitude = 5.0; // The range of animation (7.0 to 12.0)
              const animationSpeed = 0.15; 
              // Use a sine wave to create a smooth loop
              const powerOffset = powerAmplitude * (0.5 * (1.0 + Math.sin(clock.getElapsedTime() * animationSpeed)));
              uniforms.u_power.value = basePower + powerOffset;
              
              uniforms.u_mouse.value.x = actualRotation.y;
              uniforms.u_mouse.value.y = actualRotation.x;
              uniforms.u_time.value = clock.getElapsedTime();
              
              renderer.render(scene, camera);
          }

          function onWindowResize() {
              const container = canvas.parentElement;
              renderer.setSize(container.clientWidth, container.clientHeight);
              uniforms.u_resolution.value.x = renderer.domElement.width;
              uniforms.u_resolution.value.y = renderer.domElement.height;
          }

          init();
      }

      const researchCards = document.querySelectorAll('.research-card');
      const modal = document.getElementById('research-modal');
      const modalContent = document.getElementById('modal-content');
      const modalTitle = document.getElementById('modal-title');
      const modalDescription = document.getElementById('modal-description');
      const modalImg = document.getElementById('modal-img');
      const closeModalBtn = document.getElementById('close-modal-btn');

      const openModal = (card) => {
        modalTitle.textContent = card.dataset.title;
        let description = card.dataset.description;
        const link = card.dataset.link;
        const linkText = card.dataset.linkText;

        // This is the part that creates the link
        if (link && linkText && description.includes(linkText)) {
            const linkHtml = `<a href="${link}" target="_blank" class="text-accent-primary font-semibold hover:underline">${linkText}</a>`;
            description = description.replace(linkText, linkHtml);
        }
        
        modalDescription.innerHTML = description; // Use .innerHTML to render the link
        modalImg.src = card.dataset.imgSrc;
        document.body.style.overflow = 'hidden';
        modal.classList.remove('opacity-0', 'pointer-events-none');
        setTimeout(() => { modalContent.classList.remove('scale-95', 'opacity-0'); }, 10);
      };

      const closeModal = () => {
        modalContent.classList.add('scale-95', 'opacity-0');
        modal.classList.add('opacity-0');
        setTimeout(() => {
          modal.classList.add('pointer-events-none');
          document.body.style.overflow = '';
        }, 300);
      };

      researchCards.forEach(card => card.addEventListener('click', () => openModal(card)));
      closeModalBtn.addEventListener('click', closeModal);
      modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

      const publicationsData = [
        { year: '2025', journal: 'International Journal of Solids and Structures', title: 'Dynamic homogenization of random elastodynamic metamaterials using space‚Äìtime Fourier transform', authors: 'Shirazi, A. H., Abedi, R., & Pal, R. K.', link: 'https://doi.org/10.1016/j.ijsolstr.2025.113339'},
        { year: '2020', journal: 'The European Physical Journal Plus', title: 'Physics of rack-and-pinion-inspired metamaterials with rotational resonators for broadband vibration suppression', authors: 'Shirazi, A. H., & Sedighi, H. M.', link: 'https://doi.org/10.1140/epjp/s13360-020-00286-y'},
        { year: '2022', journal: 'Journal of Thermal Stresses', title: 'Thermoelastic behavior of an isotropic solid sphere under a non-uniform heat flow according to the MGT thermoelastic model', authors: 'Abouelregal, A. E., Saidi, A., Mohammad-Sedighi, H., Shirazi, A. H., & Sofiyev, A. H.', link: 'https://doi.org/10.1080/01495739.2021.2005497'},
        { year: '2022', journal: 'Silicon', title: 'The effect of excess carrier on a semiconducting semi-infinite medium subject to a normal force by means of Green and Naghdi approach', authors: 'Abouelregal, A. E., Sedighi, H. M., & Shirazi, A. H.', link: 'https://doi.org/10.1007/s12633-021-01289-9'},
        { year: '2022', journal: 'Continuum Mechanics and Thermodynamics', title: 'Computational analysis of an infinite magneto-thermoelastic solid...', authors: 'Abouelregal, A. E., Mohammad-Sedighi, H., Shirazi, A. H., Malikan, M., & Eremeyev, V. A.', link: 'https://doi.org/10.1007/s00161-021-00998-1'},
        { year: '2021', journal: 'Facta Universitatis, Series: Mechanical Engineering', title: 'Passive atmospheric water harvesting utilizing an ancient Chinese ink slab', authors: 'He, C.-H., Liu, C., He, J.-H., Shirazi, A. H., & Mohammad-Sedighi, H.', link: 'https://doi.org/10.22190/fume201203001h'},
        { year: '2021', journal: 'Facta Universitatis, Series: Mechanical Engineering', title: 'Temperature-dependent physical characteristics of the rotating nonlocal nanobeams...', authors: 'Abouelregal, A. E., Mohammad-Sedighi, H., Faghidian, S. A., & Shirazi, A. H.', link: 'https://doi.org/10.22190/fume201222024a'},
        { year: '2021', journal: 'Facta Universitatis, Series: Mechanical Engineering', title: 'Hamiltonian-based frequency-amplitude formulation for nonlinear oscillators', authors: 'He, J.-H., Hou, W.-F., Qie, N., Gepreel, K. A., Shirazi, a. H., & Sedighi, H. M.', link: 'https://doi.org/10.22190/fume201205002h'},
        { year: '2025', journal: 'Submitted to Nonlinear Dynamics', title: 'Performance Degradation in Locally Resonant Metamaterials Due to Dead-Zone Nonlinearity', authors: 'Shirazi, A. H., Abedi, R.', link: '#'}
      ];

      const publicationsContainer = document.getElementById('publications-container');
      const prevPageBtn = document.getElementById('prevPageBtn');
      const nextPageBtn = document.getElementById('nextPageBtn');
      const pageIndicator = document.getElementById('pageIndicator');
      let currentPage = 1;
      const itemsPerPage = 4;
      const totalPages = Math.ceil(publicationsData.length / itemsPerPage);

      const renderPublications = () => {
        publicationsContainer.innerHTML = '';
        const pageItems = publicationsData.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);
        pageItems.forEach(pub => {
          const pubElement = document.createElement('div');
          pubElement.className = 'card rounded-xl p-4';
          pubElement.innerHTML = `
            <p class="text-sm text-subtle">${pub.year} &bull; ${pub.journal}</p>
            <h3 class="font-semibold text-dark mt-1">
              <a href="${pub.link}" ${pub.link === '#' ? 'class="cursor-default"' : 'target="_blank"'} class="hover:text-accent-primary transition-colors">${pub.title}</a>
            </h3>
            <p class="text-sm text-main mt-1">${pub.authors}</p>
          `;
          publicationsContainer.appendChild(pubElement);
        });
        pageIndicator.textContent = `Page ${currentPage} of ${totalPages}`;
        prevPageBtn.disabled = currentPage === 1;
        nextPageBtn.disabled = currentPage === totalPages;
      };

      prevPageBtn.addEventListener('click', () => { if (currentPage > 1) { currentPage--; renderPublications(); } });
      nextPageBtn.addEventListener('click', () => { if (currentPage < totalPages) { currentPage++; renderPublications(); } });
      renderPublications();
    });
  </script>
</body>
</html>

